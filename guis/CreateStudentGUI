package guis;

import BreezySwing.*;
import objects.*;
import java.util.ArrayList;
import javax.swing.*;

@SuppressWarnings ({"serial", "unused"})
public class CreateStudentGUI extends GBDialog {
	private AllStudents allStudents;
	private Statistics stats;
	private JLabel instructionsLabel = addLabel("When Inputting Grades, Separate the Grades with Commas", 1,1,1,1);
	private JLabel nameLabel = addLabel("Name: ", 2,1,1,1);
	private JTextField nameField = addTextField("", 2,2,1,1);
	private JLabel testsLabel = addLabel("Up to Five Test Grades: ", 3,1,1,1);
	private JTextField testsField = addTextField("", 3,2,1,1);
	private JLabel quizzesLabel = addLabel("Up to Eight Quiz Grades: ", 4,1,1,1);
	private JTextField quizzesField = addTextField("", 4,2,1,1);
	private JLabel homeworkAverageLabel = addLabel("Homework Average", 5,1,1,1);
	private JTextField homeworkAverageField = addTextField("", 5,2,1,1);
	private JButton inputButton = addButton("Create Student", 6,1,1,1);
	private JButton exitButton = addButton("Exit", 7,1,1,1);
	private JButton resetButton = addButton("Reset", 7,2,1,1);
	
	public void buttonClicked(JButton buttonObj) {
		if(buttonObj == inputButton) {
			inputStudentInfo();
		}
		if(buttonObj == exitButton) {
			setVisible(false);
		}
		if(buttonObj == resetButton) {
			resetFrame();
		}
	}
	
	private void inputStudentInfo() {
		boolean errorFound = false;
		if(allStudents.getStudents().size() + 1 <= 15) {
			try {
				allStudents.addStudent(nameField.getText(), Double.parseDouble(homeworkAverageField.getText()), getTestStrings(), getQuizStrings());
			}
			catch(NumberFormatException e) {
				messageBox("Error in number input:" + '\n' + "Include only spaces, commas, and numbers in inputs");
				errorFound = true;
			}
			catch(ArrayIndexOutOfBoundsException e) {
				messageBox("Input only up to 5 quiz grades and" + '\n' + "up to 8 test grades");
			}
		}
		else {
			messageBox("Input only fifteen students");
		}
		if(errorFound == false) {
			messageBox("Student successfully input");
			resetFrame();
		}
	}
	
	private ArrayList<Double> getTestStrings() {// fix
		double[] testNums = new double[5];
		String[] testStrings = new String[5];
		ArrayList<Double> testNumsList = new ArrayList<Double>();
		testStrings = testsField.getText().split(",");
		
		for(int i = 0; i < testStrings.length; i++) {
			testStrings[i] = testStrings[i].trim();
			testNums[i] = Double.parseDouble(testStrings[i]);
		}
		
		for(int i = 0; i < testNums.length; i++) {
			testNumsList.add(testNums[i]);
		}
		
		return testNumsList;
	}
	
	private ArrayList<Double> getQuizStrings(){// fix
		double[] quizNums = new double[8];
		String[] quizStrings = new String[8];
		ArrayList<Double> quizNumsList = new ArrayList<Double>();
		quizStrings = quizzesField.getText().split(",");
		
		for(int i = 0; i < quizStrings.length; i++) {
			quizStrings[i] = quizStrings[i].trim();
			quizNums[i] = Double.parseDouble(quizStrings[i]);
		}
		
		for(int i = 0; i < quizNums.length; i++) {
			quizNumsList.add(quizNums[i]);
		}
		
		return quizNumsList;
	}
	
	public CreateStudentGUI(JFrame frm, AllStudents allStudents, Statistics stats) {
		super(frm);
		this.allStudents = allStudents;
		this.stats = stats;
		setSize(500, 300);
		setTitle("Create a Student");
	}

	public void resetFrame() {
		nameField.setText("");
		testsField.setText("");
		quizzesField.setText("");
		homeworkAverageField.setText("");
	}
}
