package guis;

import BreezySwing.*;
import objects.*;
import java.util.ArrayList;
import javax.swing.*;

@SuppressWarnings ({"serial", "unused"})
public class CreateStudentGUI extends GBDialog {
	private AllStudents allStudents;
	private JLabel instructionsLabel = addLabel("When Inputting Grades, Separate the Grades with Commas", 1,1,1,1);
	private JLabel nameLabel = addLabel("Name: ", 2,1,1,1);
	private JTextField nameField = addTextField("", 2,2,1,1);
	private JLabel testsLabel = addLabel("Up to Five Test Grades: ", 3,1,1,1);
	private JTextField testsField = addTextField("", 3,2,1,1);
	private JLabel quizzesLabel = addLabel("Up to Eight Quiz Grades: ", 4,1,1,1);
	private JTextField quizzesField = addTextField("", 4,2,1,1);
	private JLabel homeworkAverageLabel = addLabel("Homework Average", 5,1,1,1);
	private JTextField homeworkAverageField = addTextField("", 5,2,1,1);
	private JButton inputButton = addButton("Create Student", 6,1,1,1);
	private JButton exitButton = addButton("Exit", 7,1,1,1);
	private JButton resetButton = addButton("Reset", 7,2,1,1);
	
	public void buttonClicked(JButton buttonObj) {
		if(buttonObj == inputButton) {
			boolean errorFound = false;
			if(allStudents.getStudents().size() + 1 <= 15) {
				try{
					inputStudentInfo();
				}
				catch(NumberFormatException e) {
					messageBox("Error in number input:" + '\n' + "Include only spaces, commas, and numbers in inputs");
					errorFound = true;
				}
				catch(ArrayIndexOutOfBoundsException e) {
					messageBox("Input only up to 5 quiz grades and" + '\n' + "up to 8 test grades");
					errorFound = true;
				}
			}
			else if(allStudents.getStudents().size() > 15){
				messageBox("Input only 15 students");
				resetFrame();
			}
			// resume programming here
			if(errorFound == false) {
				messageBox("Student Info Successfully Input");
				resetFrame();
			}
			
		}
		if(buttonObj == exitButton) {
			setVisible(false);
		}
		if(buttonObj == resetButton) {
			resetFrame();
		}
	}
	
	private void inputStudentInfo() {
		allStudents.addStudent(nameField.getText(), Double.parseDouble(homeworkAverageField.getText()),
		getTestList(), getQuizList());
	}
	
	private ArrayList<Double> getTestList() {
		ArrayList<Double> testNums = new ArrayList<Double>();
		String[] testStrings = new String[5];
		testStrings = testsField.getText().split(",");
		
		for(int i = 0; i < testStrings.length; i++){
			testStrings[i] = testStrings[i].trim();
		}
		
		for(int i = 0; i < testStrings.length; i++){
			testNums.add(Double.parseDouble(testStrings[i]));
		}
		
		return testNums;
	}
	
	private ArrayList<Double> getQuizList(){
		ArrayList<Double> quizNums = new ArrayList<Double>();
		String[] quizStrings = new String[8];
		quizStrings = quizzesField.getText().split(",");
		
		for(int i = 0; i < quizStrings.length; i++){
			quizStrings[i] = quizStrings[i].trim();
		}

		for(int i = 0; i < quizStrings.length; i++) {
			quizNums.add(Double.parseDouble(quizStrings[i]));
		}
		
		return quizNums;
	}
	
	public CreateStudentGUI(JFrame frm, AllStudents allStudents) {
		super(frm);
		this.allStudents = allStudents;
		setSize(500, 300);
		setTitle("Create a Student");
	}

	public void resetFrame() {
		nameField.setText("");
		testsField.setText("");
		quizzesField.setText("");
		homeworkAverageField.setText("");
	}
}
